{"ast":null,"code":"import axios from 'axios';\n\n// Base URL for the API\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost/php_project/Lock Box/LockBox.php';\n\n// API key for authentication\nconst API_KEY = process.env.REACT_APP_API_KEY || 'lock123';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  },\n  withCredentials: true // Enable sending cookies in cross-origin requests\n});\n\n// Helper function to format data for PHP backend\nconst formatData = data => {\n  return `json=${JSON.stringify({\n    ...data,\n    api_key: API_KEY\n  })}`;\n};\n\n// Authentication services\nexport const authService = {\n  // Login user\n  login: async (email, password) => {\n    try {\n      const response = await api.post('', formatData({\n        email,\n        password,\n        validate: true\n      }));\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Register new user\n  register: async (name, email, mobile, password) => {\n    try {\n      const response = await api.post('', formatData({\n        name,\n        email,\n        mobile,\n        password,\n        add_user: true\n      }));\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Request password reset\n  forgotPassword: async email => {\n    try {\n      const response = await api.post('', formatData({\n        email,\n        send_mail_otp: true\n      }));\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\n\n// Password management services\nexport const passwordService = {\n  // Add a new password\n  addPassword: async (userId, password, name, email) => {\n    try {\n      const response = await api.post('', formatData({\n        user_id: userId,\n        pass: password,\n        name,\n        email,\n        add_pass: true\n      }));\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Get all passwords for a user\n  getPasswords: async email => {\n    try {\n      const response = await api.post('', formatData({\n        email,\n        get_pass: true\n      }));\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  updatePassword: async passwordData => {\n    try {\n      console.log('Updating password with data:', passwordData);\n      const response = await api.post('', formatData({\n        id: passwordData.id,\n        name: passwordData.platform,\n        password: passwordData.password,\n        update_password: true\n      }));\n      console.log('Update password response:', response.data);\n      if (response.data.code === '150') {\n        return response.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to update password');\n      }\n    } catch (error) {\n      console.error('Error updating password:', error);\n      if (error.response) {\n        console.error('Error response:', error.response.data);\n        throw new Error(error.response.data.message || 'Failed to update password');\n      }\n      throw error;\n    }\n  },\n  exportPasswords: async (email, format = 'xml') => {\n    try {\n      // For file downloads, we need to use a different approach\n      // Create a form and submit it to trigger the download\n      const form = document.createElement('form');\n      form.method = 'POST';\n      form.action = 'http://localhost/php_project/Lock%20Box/LockBox.php';\n      form.target = '_blank'; // Open in new tab/window\n\n      // Add the JSON data\n      const jsonInput = document.createElement('input');\n      jsonInput.type = 'hidden';\n      jsonInput.name = 'json';\n      jsonInput.value = JSON.stringify({\n        api_key: 'lock123',\n        export_passwords: true,\n        email: email,\n        format: format\n      });\n      form.appendChild(jsonInput);\n\n      // Add the form to the document and submit it\n      document.body.appendChild(form);\n      form.submit();\n\n      // Remove the form from the document\n      document.body.removeChild(form);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error exporting passwords:', error);\n      throw error;\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","API_KEY","REACT_APP_API_KEY","api","create","baseURL","headers","withCredentials","formatData","data","JSON","stringify","api_key","authService","login","email","password","response","post","validate","error","register","name","mobile","add_user","forgotPassword","send_mail_otp","passwordService","addPassword","userId","user_id","pass","add_pass","getPasswords","get_pass","updatePassword","passwordData","console","log","id","platform","update_password","code","Error","message","exportPasswords","format","form","document","createElement","method","action","target","jsonInput","type","value","export_passwords","appendChild","body","submit","removeChild","success"],"sources":["C:/xampp/htdocs/php_project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Base URL for the API\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost/php_project/Lock Box/LockBox.php';\r\n\r\n// API key for authentication\r\nconst API_KEY = process.env.REACT_APP_API_KEY || 'lock123';\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  withCredentials: true, // Enable sending cookies in cross-origin requests\r\n});\r\n\r\n// Helper function to format data for PHP backend\r\nconst formatData = (data) => {\r\n  return `json=${JSON.stringify({ ...data, api_key: API_KEY })}`;\r\n};\r\n\r\n// Authentication services\r\nexport const authService = {\r\n  // Login user\r\n  login: async (email, password) => {\r\n    try {\r\n      const response = await api.post('', formatData({ \r\n        email, \r\n        password,\r\n        validate: true \r\n      }));\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Register new user\r\n  register: async (name, email, mobile, password) => {\r\n    try {\r\n      const response = await api.post('', formatData({ \r\n        name, \r\n        email, \r\n        mobile, \r\n        password,\r\n        add_user: true \r\n      }));\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Request password reset\r\n  forgotPassword: async (email) => {\r\n    try {\r\n      const response = await api.post('', formatData({ \r\n        email,\r\n        send_mail_otp: true \r\n      }));\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// Password management services\r\nexport const passwordService = {\r\n  // Add a new password\r\n  addPassword: async (userId, password, name, email) => {\r\n    try {\r\n      const response = await api.post('', formatData({ \r\n        user_id: userId,\r\n        pass: password,\r\n        name,\r\n        email,\r\n        add_pass: true \r\n      }));\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get all passwords for a user\r\n  getPasswords: async (email) => {\r\n    try {\r\n      const response = await api.post('', formatData({ \r\n        email,\r\n        get_pass: true \r\n      }));\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  updatePassword: async (passwordData) => {\r\n    try {\r\n      console.log('Updating password with data:', passwordData);\r\n      const response = await api.post('', formatData({\r\n        id: passwordData.id,\r\n        name: passwordData.platform,\r\n        password: passwordData.password,\r\n        update_password: true\r\n      }));\r\n      \r\n      console.log('Update password response:', response.data);\r\n      \r\n      if (response.data.code === '150') {\r\n        return response.data;\r\n      } else {\r\n        throw new Error(response.data.message || 'Failed to update password');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating password:', error);\r\n      if (error.response) {\r\n        console.error('Error response:', error.response.data);\r\n        throw new Error(error.response.data.message || 'Failed to update password');\r\n      }\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  exportPasswords: async (email, format = 'xml') => {\r\n    try {\r\n      // For file downloads, we need to use a different approach\r\n      // Create a form and submit it to trigger the download\r\n      const form = document.createElement('form');\r\n      form.method = 'POST';\r\n      form.action = 'http://localhost/php_project/Lock%20Box/LockBox.php';\r\n      form.target = '_blank'; // Open in new tab/window\r\n      \r\n      // Add the JSON data\r\n      const jsonInput = document.createElement('input');\r\n      jsonInput.type = 'hidden';\r\n      jsonInput.name = 'json';\r\n      jsonInput.value = JSON.stringify({\r\n        api_key: 'lock123',\r\n        export_passwords: true,\r\n        email: email,\r\n        format: format\r\n      });\r\n      form.appendChild(jsonInput);\r\n      \r\n      // Add the form to the document and submit it\r\n      document.body.appendChild(form);\r\n      form.submit();\r\n      \r\n      // Remove the form from the document\r\n      document.body.removeChild(form);\r\n      \r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Error exporting passwords:', error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}